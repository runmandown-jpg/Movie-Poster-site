<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Top 10 Box Office Hits</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>

        body {

            font-family: 'Inter', sans-serif;

        }

        .line-clamp-2 {

            display: -webkit-box;

            -webkit-line-clamp: 2;

            -webkit-box-orient: vertical;

            overflow: hidden;

        }

    </style>

</head>

<body class="bg-gray-900 text-white min-h-screen py-10 px-4 sm:px-8">

    <div class="max-w-7xl mx-auto">

        <h1 class="text-4xl sm:text-5xl font-extrabold text-center mb-6 tracking-wide text-red-500">

            Top 10 Box Office Hits

        </h1>

        <p class="text-center text-gray-400 mb-10">

            Browse the top grossing movies by month.

        </p>

 

        <!-- Input controls -->

        <div class="flex flex-col items-center justify-center space-y-4 mb-12 max-w-2xl mx-auto">

            <div class="flex flex-wrap justify-center items-center gap-4 w-full">

                <div class="flex flex-col items-start w-28">

                    <label for="year-select" class="text-sm font-semibold text-gray-300 mb-1">Year</label>

                    <select id="year-select" class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 cursor-pointer focus:outline-none focus:ring-2 focus:ring-red-500"></select>

                </div>

 

                <div class="flex flex-col items-start w-36">

                    <label for="month-select" class="text-sm font-semibold text-gray-300 mb-1">Month</label>

                    <select id="month-select" class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 cursor-pointer focus:outline-none focus:ring-2 focus:ring-red-500"></select>

                </div>

 

                <div class="flex flex-col items-start w-28">

                    <label for="region-select" class="text-sm font-semibold text-gray-300 mb-1">Region</label>

                    <select id="region-select" class="w-full p-2 rounded-lg bg-gray-700 text-white border border-gray-600 cursor-pointer focus:outline-none focus:ring-2 focus:ring-red-500"></select>

                </div>

           

                <div class="flex items-end space-x-2">

                    <button id="prev-month-btn" class="px-4 py-2 bg-red-600 text-white font-bold rounded-lg shadow-lg hover:bg-red-700 transition-colors duration-200">

                        Prev

                    </button>

                    <button id="next-month-btn" class="px-4 py-2 bg-red-600 text-white font-bold rounded-lg shadow-lg hover:bg-red-700 transition-colors duration-200">

                        Next

                    </button>

                </div>

            </div>

        </div>

 

        <!-- Movie Grid and Messages -->

        <div id="content-area" class="text-center text-lg text-gray-400 mt-20">

            <p>Loading movies...</p>

        </div>

       

    </div>

 

    <script>

        document.addEventListener('DOMContentLoaded', () => {

            // Hardcoded TMDb API Bearer Token

            const token = "eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3NmFjMzdmY2M2NTIyMDljODI2MWQ2M2RmYjNhNWJhYSIsIm5iZiI6MTc1NjQ5MDU0Mi4wODksInN1YiI6IjY4YjFlYjJlM2NhZmM5ZjEyYjU0ZGE2OSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.SuTr-jDVinXLwrFu2QpoozseO5TOeK7Uy_0HIPxqYZA";

 

            let year = new Date().getFullYear();

            let month = new Date().getMonth() + 1;

            let region = "US";

           

            const contentArea = document.getElementById('content-area');

            const yearSelect = document.getElementById('year-select');

            const monthSelect = document.getElementById('month-select');

            const regionSelect = document.getElementById('region-select');

            const prevMonthBtn = document.getElementById('prev-month-btn');

            const nextMonthBtn = document.getElementById('next-month-btn');

 

            // Populate dropdowns

            const years = Array.from({ length: 100 }, (_, i) => new Date().getFullYear() - i);

            years.forEach(y => {

                const option = document.createElement('option');

                option.value = y;

                option.textContent = y;

                yearSelect.appendChild(option);

            });

            yearSelect.value = year;

 

            const months = [

                { value: 1, name: "January" }, { value: 2, name: "February" }, { value: 3, name: "March" },

                { value: 4, name: "April" }, { value: 5, name: "May" }, { value: 6, name: "June" },

                { value: 7, name: "July" }, { value: 8, name: "August" }, { value: 9, name: "September" },

                { value: 10, name: "October" }, { value: 11, name: "November" }, { value: 12, name: "December" },

            ];

            months.forEach(m => {

                const option = document.createElement('option');

                option.value = m.value;

                option.textContent = m.name;

                monthSelect.appendChild(option);

            });

            monthSelect.value = month;

 

            const regions = ["US", "UK", "FR", "DE", "IN", "JP", "KR"];

            regions.forEach(r => {

                const option = document.createElement('option');

                option.value = r;

                option.textContent = r;

                regionSelect.appendChild(option);

            });

            regionSelect.value = region;

 

            const fetchMovies = async () => {

                if (!token) {

                    contentArea.innerHTML = `<div class="text-center text-lg text-red-400 mt-20 p-4 bg-gray-800 rounded-lg">A valid TMDb token is required to fetch movies.</div>`;

                    return;

                }

 

                contentArea.innerHTML = `<div class="text-center text-lg text-gray-400 mt-20">Loading movies...</div>`;

 

                try {

                    const firstDay = `${year}-${String(month).padStart(2, "0")}-01`;

                    const lastDay = new Date(year, month, 0).getDate();

                    const lastDate = `${year}-${String(month).padStart(2, "0")}-${lastDay}`;

           

                    const res = await fetch(

                        `https://api.themoviedb.org/3/discover/movie?primary_release_date.gte=${firstDay}&primary_release_date.lte=${lastDate}&region=${region}&sort_by=vote_count.desc`,

                        {

                            headers: {

                                Authorization: `Bearer ${token}`,

                            },

                        }

                    );

           

                    if (!res.ok) {

                        throw new Error(`API Error: ${res.status} - ${res.statusText}`);

                    }

           

                    const data = await res.json();

                    const top10Movies = (data.results || []).slice(0, 10);

                    const moviesWithPosters = top10Movies.filter(m => m.poster_path);

 

                    const moviesWithImdb = await Promise.all(

                        moviesWithPosters.map(async (movie) => {

                            const externalIdsRes = await fetch(

                                `https://api.themoviedb.org/3/movie/${movie.id}/external_ids`,

                                {

                                    headers: {

                                        Authorization: `Bearer ${token}`,

                                    },

                                }

                            );

                            const externalIdsData = await externalIdsRes.json();

                            return { ...movie, imdb_id: externalIdsData.imdb_id };

                        })

                    );

           

                    if (moviesWithImdb.length === 0) {

                        contentArea.innerHTML = `<div class="text-center text-lg text-gray-400 mt-20">No posters available for this month and region.</div>`;

                    } else {

                        renderMovies(moviesWithImdb);

                    }

                } catch (e) {

                    console.error(e);

                    contentArea.innerHTML = `<div class="text-center text-lg text-red-400 mt-20 p-4 bg-gray-800 rounded-lg">Failed to fetch movies. Please check your token and try again, or try a different month/year. The API may not have revenue data for this period.</div>`;

                }

            };

 

            const renderMovies = (movies) => {

                contentArea.innerHTML = `

                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 justify-center">

                        ${movies.map(m => `

                            <a

                                href="https://www.imdb.com/title/${m.imdb_id}"

                                target="_blank"

                                rel="noopener noreferrer"

                                class="flex flex-col rounded-xl overflow-hidden shadow-2xl transform hover:scale-105 transition-transform duration-300"

                            >

                                <img

                                    src="https://image.tmdb.org/t/p/w500${m.poster_path}"

                                    alt="${m.title}"

                                    class="w-full h-auto object-cover"

                                    onerror="this.onerror=null; this.src='https://placehold.co/500x750/111/fff?text=${encodeURIComponent(m.title)}';"

                                />

                                <div class="p-4 text-center bg-gray-800 flex-grow">

                                    <span class="text-white text-base font-bold leading-tight line-clamp-2">

                                        ${m.title}

                                    </span>

                                </div>

                            </a>

                        `).join('')}

                    </div>

                `;

            };

 

            const changeMonth = (dir) => {

                month += dir;

                if (month === 0) {

                    month = 12;

                    year -= 1;

                } else if (month === 13) {

                    month = 1;

                    year += 1;

                }

                yearSelect.value = year;

                monthSelect.value = month;

                fetchMovies();

            };

           

            // Event Listeners

            yearSelect.addEventListener('change', (e) => {

                year = parseInt(e.target.value);

                fetchMovies();

            });

 

            monthSelect.addEventListener('change', (e) => {

                month = parseInt(e.target.value);

                fetchMovies();

            });

 

            regionSelect.addEventListener('change', (e) => {

                region = e.target.value;

                fetchMovies();

            });

 

            prevMonthBtn.addEventListener('click', () => changeMonth(-1));

            nextMonthBtn.addEventListener('click', () => changeMonth(1));

 

            fetchMovies();

        });

    </script>

</body>

</html>

 

 